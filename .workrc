# work configuration

export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/ssh-agent.socket"

SSH_ENV=$HOME/.ssh/environment

start_agent()
{
	echo "initializing new SSH agent ..."
	ssh-agent | sed 's/^echo/#echo/' > $SSH_ENV
	echo "succeeded"
	chmod 600 $SSH_ENV
	. $SSH_ENV
	ssh-add
}

# source SSH settings, if applicable
if [[ -f $SSH_ENV ]]
then
	. $SSH_ENV # > /dev/null
	ps -ef | grep $SSH_AGENT_PID | grep ssh-agent > /dev/null || {
		source ~/.zshrc && start_agent && cd ~/git/dotfiles && git add . && git commit && git push cd ~/git/scripts git add .  git commit git push cd ~; pacaur -Suy
	}
else
	start_agent
fi
